<div class="banner-show">
  <div class="container">
    <div class="row">
      <div class="col-md-6 mt-n5">
         <%= link_to "Go Back to Pokemons' list", pokemons_path, class: "login-btn mt-5" %>
         <% if policy(@pokemon).destroy? %>
          <p> <%= link_to 'Delete', @pokemon, method: :delete, data: {confirm: "Do you REALY want to delete this Pokemon?"}, class: 'delete-btn'%></p>
        <% end %>
        <div class="clash-card barbarian mt-5">
          <div class="clash-card__image clash-card__image--barbarian">
            <% if @pokemon.photo.attached? %>
            <%= cl_image_tag @pokemon.photo.key, height: 252, width: 252, crop: :fill %>
            <% else %>
            <img src="https://cdn.glitch.com/c13537fc-8924-4dee-b876-b562eed68eae%2Fpikachu-removebg-preview.png?v=1605611430597" height="252px" width="247px" alt="pikachu" />
            <% end %>
            </div>
            <div class="clash-card__unit-name"><%= @pokemon.name %></div>
            <div class="clash-card__level clash-card__level--barbarian">Level <%= @pokemon.level %></div>
            <div class="clash-card__unit-description">
              This Pikachu has a great ha warrior with an angry, battle-ready expression, hungry for giving you electricity for the all family house.
            </div>
            <div class="clash-card__unit-stats clash-card__unit-stats--barbarian">
              <div class="one-third">
                <div class="stat"><%= @pokemon.abilities %></div>
              </div>
              <div class="one-third no-border">
                <div id="price" class="stat"><%= @pokemon.price %>€/d</div>
              </div>
            </div>
        </div>
      <%# if @pokemon.photo.attached? %> <%# background_url = cl_image_path @pokemon.photo.key, width: 300, height: 400, crop: :fill %>
      <%# else %> <%# background_url = 'https://source.unsplash.com/300x400/?pokemon' %>
      <%# end %>
    </div>
    <!-- ancien formulaire de réservation >
    <div class="col-6 rounded d-flex justify-content-center align-items-center">
      <%= simple_form_for [@pokemon, @pokemon.bookings.new] do |f| %>
        <%= f.input :start_date, as: :date, class: "wd-100"%>
        <%= f.input :end_date, as: :date %>
        <%= f.submit 'Catch Pokemon', class: "btn btn-warning" %>
      <% end %>
    </div> -->

    <!-- Flatpickr -->
    <div class="col-6 rounded d-flex justify-content-center align-items-center">
      <h2>Catch this <%= @pokemon.name %></h2>
      <%= simple_form_for [@pokemon, @pokemon.bookings.new] do |f| %>
        <%= f.input  :start_date, label: "Pick your dates:", as: :string, required: false, input_html: {id: "range_start", class: "d-none"} %>
        <%= f.input  :end_date, as: :string, label: false, required: false, input_html: {id: "range_end", class: "d-none" } %>
        <%= f.button :submit, "Catch it", class: "btn btn-primary" %>
      <% end %>
    </div>
    <div
      id="booking-form-div"
      data-bookings="<%= @bookings_dates.to_json %>"
    >
    <p>Réservation pour <span id="total-nights">0</span> jours</p>
    <p>Prix total : <span id="total-price">0</span> € </p>
  </div>
</div>
</div>
